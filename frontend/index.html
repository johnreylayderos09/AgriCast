<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üå± AgriCast - Smart Crop Forecasting</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">üå± AgriCast</div>
            <div class="tagline">AI-Powered Crop Forecasting System</div>
            <p>Advanced predictions using ML models, generative AI, and climate data analysis</p>
            
            <div class="features-grid">
                <div class="feature-card">
                    <strong>üå± Soil Analysis</strong><br>
                    Advanced soil parameter evaluation
                </div>
                <div class="feature-card">
                    <strong>üî¨ ML Predictions</strong><br>
                    Trained machine learning models
                </div>
                <div class="feature-card">
                    <strong>ü§ñ AI Assistant</strong><br>
                    Generative AI backup system
                </div>
                <div class="feature-card">
                    <strong>üìç Location-Based</strong><br>
                    Real-time weather integration
                </div>
            </div>
        </header>

        <div class="main-content">
            <div class="input-panel">
                <h2 class="panel-title">üî¨ Input Parameters</h2>
                
                <div class="form-section">
                    <h3 class="section-title">Soil Properties</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="ph">pH Level</label>
                            <input type="number" id="ph" step="0.1" min="0" max="14" placeholder="6.5">
                        </div>
                        <div class="form-group">
                            <label for="nitrogen">Nitrogen (N) ppm</label>
                            <input type="number" id="nitrogen" min="0" placeholder="120">
                        </div>
                        <div class="form-group">
                            <label for="phosphorus">Phosphorus (P) ppm</label>
                            <input type="number" id="phosphorus" min="0" placeholder="80">
                        </div>
                        <div class="form-group">
                            <label for="potassium">Potassium (K) ppm</label>
                            <input type="number" id="potassium" min="0" placeholder="200">
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3 class="section-title">Climate & Location</h3>
                    
                    <div class="location-section">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="location-input">Location (City, Country)</label>
                                <div class="location-input-container">
                                    <input type="text" id="location-input" placeholder="e.g., Manila, Philippines">
                                    <button type="button" class="location-btn" onclick="getCurrentLocation()">üìç</button>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Coordinates</label>
                                <div class="coordinates-display">
                                    <span id="coordinates">Click üìç or Enter Loc</span>
                                </div>
                            </div>
                        </div>
                        
                        <button type="button" class="fetch-climate-btn" onclick="fetchClimateData()">
                            üå¶Ô∏è Get Climate Data
                        </button>
                        
                        <div id="climate-status" class="climate-status"></div>
                    </div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label for="temperature">Current Temperature ¬∞C</label>
                            <input type="number" id="temperature" step="0.1" placeholder="25" readonly>
                        </div>
                        <div class="form-group">
                            <label for="rainfall">Est. Annual Rainfall mm</label>
                            <input type="number" id="rainfall" min="0" placeholder="1200" readonly>
                        </div>
                    </div>
                </div>

                <button class="predict-btn" onclick="runPrediction()">
                    üöÄ Analyze & Predict
                </button>
            </div>

            <div class="results-panel">
                <h2 class="panel-title">üìä Results & Recommendations</h2>
                
                <div id="initial-state" class="results-content">
                    <div style="padding: 40px; text-align: center; color: #6c757d;">
                        <div style="font-size: 4rem; margin-bottom: 20px;">üåæ</div>
                        <h3>Ready for Multi-System Analysis</h3>
                        <p>Enter your soil and climate data to get predictions from ML models, AI assistant, or rule-based analysis</p>
                    </div>
                </div>

                <div id="loading" class="loading">
                    <div class="spinner"></div>
                    <p>Running multi-system prediction analysis...</p>
                </div>

                <div id="results" style="display: none;">
                    <div class="weather-summary" id="weather-summary" style="display: none;">
                        <h4 style="color: var(--primary-green); margin-bottom: 10px;">üå§Ô∏è Current Weather</h4>
                        <div class="weather-grid">
                            <div class="weather-item">
                                <span class="weather-icon" id="weather-icon">‚òÄÔ∏è</span>
                                <div>
                                    <div class="weather-main" id="weather-main">Sunny</div>
                                    <div class="weather-desc" id="weather-desc">Clear sky</div>
                                </div>
                            </div>
                            <div class="weather-details">
                                <div><strong>Location:</strong> <span id="current-location">---</span></div>
                                <div><strong>Feels like:</strong> <span id="feels-like">---</span>¬∞C</div>
                                <div><strong>Humidity:</strong> <span id="humidity">---</span>%</div>
                            </div>
                        </div>
                    </div>

                    <div class="prediction-card fade-in">
                        <div class="prediction-score" id="score">85%</div>
                        <div class="prediction-label">Crop Suitability Score</div>
                    </div>

                    <div class="soil-health-indicator">
                        <span><strong>Soil Health Index</strong></span>
                        <div class="indicator-bar">
                            <div class="indicator-fill status-good" id="soil-health" style="width: 80%;"></div>
                        </div>
                        <span id="soil-health-text">Good</span>
                    </div>

                    <div class="recommendations">
                        <h3 style="color: var(--primary-green); margin-bottom: 15px;">üåæ Recommended Crops</h3>
                        <div class="crop-list" id="crop-recommendations">
                            <!-- Dynamic content -->
                        </div>
                    </div>

                    <!-- NEW: Farming Advice Section -->
                    <div class="farming-advice-section" id="farming-advice-section" style="display: none;">
                        <h3 style="color: var(--primary-green); margin-bottom: 15px;">üí° Farming Advice</h3>
                        <div class="advice-container" id="farming-advice">
                            <!-- Dynamic farming advice content -->
                        </div>
                    </div>

                    <!-- NEW: Prediction Reasoning Section -->
                    <div class="reasoning-section" id="reasoning-section" style="display: none;">
                        <h3 style="color: var(--primary-green); margin-bottom: 15px;">üß† Analysis Reasoning</h3>
                        <div class="reasoning-container" id="prediction-reasoning">
                            <!-- Dynamic reasoning content -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="chart-container" id="chart-section" style="display: none;">
            <h3 style="color: var(--primary-green); margin-bottom: 20px;">üìà Soil Parameter Analysis</h3>
            <div id="chart-content">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                    <div class="soil-health-indicator">
                        <span>pH Level</span>
                        <div class="indicator-bar">
                            <div class="indicator-fill" id="ph-bar"></div>
                        </div>
                        <span id="ph-status"></span>
                    </div>
                    <div class="soil-health-indicator">
                        <span>Nitrogen</span>
                        <div class="indicator-bar">
                            <div class="indicator-fill" id="n-bar"></div>
                        </div>
                        <span id="n-status"></span>
                    </div>
                    <div class="soil-health-indicator">
                        <span>Phosphorus</span>
                        <div class="indicator-bar">
                            <div class="indicator-fill" id="p-bar"></div>
                        </div>
                        <span id="p-status"></span>
                    </div>
                    <div class="soil-health-indicator">
                        <span>Potassium</span>
                        <div class="indicator-bar">
                            <div class="indicator-fill" id="k-bar"></div>
                        </div>
                        <span id="k-status"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
<script src="script.js"></script>
</body>
</html>
